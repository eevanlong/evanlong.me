---
title: TypeScript高阶用法
---

### Record

以 typeof 格式快速创建一个类型，此类型包含一组指定的属性且都是必填。

```ts
type Coord = Record<'x' | 'y', number>;

// 等同于
type Coord = {
  x: number;
  y: number;
};
```

具体的复杂业务场景中，一般会接口 `Pick` 、`Partial` 等组合使用，从而过滤和重组出新的类型定义。

### Partial

将类型定义的所有属性都修改为可选。

```ts
type Coord = Partial<Record<'x' | 'y', number>>;

// 等同于
type Coord = {
  x?: number;
  y?: number;
};
```

### Readonly

不管是从字面意思，还是定义上都很好理解：将所有属性定义为自读。

```ts
type Coord = Readonly<Record<'x' | 'y', number>>;

// 等同于
type Coord = {
  readonly x: number;
  readonly y: number;
};

// 如果进行了修改，则会报错：
const c: Coord = { x: 1, y: 1 };
c.x = 2; // Error: Cannot assign to 'x' because it is a read-only property.
```

### Pick

从类型定义的属性中，选取指定一组属性，返回一个新的类型定义。

```ts
type Coord = Record<'x' | 'y', number>;

type CoordX = Pick<Coord, 'x'>;

// 等用于
type CoordX = {
  x: number;
};
```

## Required

Required 的作用是将传入的属性变为必选项, 源码如下

```ts
type Required<T> = { [P in keyof T]-?: T[P] };
```

我们发现一个有意思的用法 `-?`, 这里很好理解就是将可选项代表的 `?` 去掉, 从而让这个类型变成必选项. 与之对应的还有个`+?` , 这个含义自然与`-?`之前相反, 它是用来把属性变成可选项的.

## Mutable (未包含)

类似地, 其实还有对 `+` 和 `-`, 这里要说的不是变量的之间的进行加减而是对 `readonly` 进行加减.以下代码的作用就是将 T 的所有属性的 readonly 移除,你也可以写一个相反的出来.

```ts
type Mutable<T> = {
  -readonly [P in keyof T]: T[P];
};
```
